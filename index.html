<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/1.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/mid.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/small.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Jie, Map">










<meta name="description" content="幽人竹桑园 归卧寂无喧">
<meta property="og:type" content="website">
<meta property="og:title" content="Sibylau&#39;s Map">
<meta property="og:url" content="https://sibylau.github.io/index.html">
<meta property="og:site_name" content="Sibylau&#39;s Map">
<meta property="og:description" content="幽人竹桑园 归卧寂无喧">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sibylau&#39;s Map">
<meta name="twitter:description" content="幽人竹桑园 归卧寂无喧">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://sibylau.github.io/">





  <title>Sibylau's Map</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Sibylau's Map</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-schedule">
          <a href="/schedule/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br>
            
            Schedule
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>
            
            Sitemap
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sibylau.github.io/2019/01/27/Lucky-Bee-Problems/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jie Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/2.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sibylau's Map">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/27/Lucky-Bee-Problems/" itemprop="url">Lucky Bee - Problems</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-27T15:53:19+08:00">
                2019-01-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Problems"><a href="#Problems" class="headerlink" title="Problems"></a>Problems</h2><h3 id="IS-LAPACK-Multi-threaded"><a href="#IS-LAPACK-Multi-threaded" class="headerlink" title="IS LAPACK Multi-threaded?"></a>IS LAPACK Multi-threaded?</h3><p><strong>Statement</strong>: LAPACK+BLAS（都是Netlib上下载安装的），应该是只支持单线程。但在实验的过程中，发现Cholesky分解确实是单线程，LU分解却是多线程的（使用top或htop查看）。 </p>
<p>现象：</p>
<ul>
<li>cholesky: 8x8, 16x16, 32x32, 64x64, 128x128, 256x256, 512x512都是single thread</li>
<li>lu: 8x8(1 thread), 16x16(8 threads), 32x32(16 threads), 64x64(32 threads), 128x128(64 threads), 256x256(64 threads), 512x512(64 threads)</li>
</ul>
<p>思路：</p>
<ul>
<li><p>用了MKL, OpenBLAS, ATLAS?</p>
<ul>
<li><p>MKL一定没有装，我没有libmkl…</p>
</li>
<li><p>我的/usr/lib下有liblapack_atlas, libatlas, libcblas, 和libopenblas（划掉前缀lib）的静态和动态库。。。？？怎么会啊？？</p>
<p>在lapack和blas的目录里面find -name找，都没有找到这些诡异的库，它们不是我安装的时候手动编译cp到/usr/lib的，那应该就是make的时候这个版本自己安装的。good。:)。以下是debug的记录。还有为什么新版本会有这些支持multi thread的东西。</p>
</li>
</ul>
</li>
<li><p><a href="http://www.netlib.org/lapack/官网上，LAPACK最高版本3.8.0；http://www.netlib.org/blas/上，也是3.8.0的下载包，我的版本是最高版本。" target="_blank" rel="noopener">http://www.netlib.org/lapack/官网上，LAPACK最高版本3.8.0；http://www.netlib.org/blas/上，也是3.8.0的下载包，我的版本是最高版本。</a></p>
</li>
<li><p>我的BLAS库里面全是.f的fortran源代码文件</p>
<ul>
<li><strong>.f</strong>, <strong>.for</strong>, <strong>.FOR</strong>, <strong>.ftn*</strong>, <strong>.f90*</strong>, <strong>.f95*</strong>, <strong>.f03*</strong>: fortran源码，不需编译预处理</li>
<li><strong>.F</strong>, <strong>.fpp</strong>, <strong>.FPP</strong>, <strong>.FTN*</strong>, <strong>.F90*</strong>, <strong>.F95*</strong>, <strong>.F03*</strong>: fortran源码，需编译预处理</li>
<li><strong>.r</strong>: fortran源码，需要RatFor编译预处理</li>
<li><strong>.o</strong>: 对象文件</li>
<li><strong>.s</strong>: 汇编语言代码</li>
<li><strong>.so</strong>: 动态库; <strong>.a</strong>: 静态库 (archive) </li>
</ul>
<p>发现BLAS当时安装的时候没有编译成库放到系统路径里，重新执行了这一步骤。另外发现了一个比较神奇的事情，make -j8之后，make还是只有一个thread在跑，跟学弟分析了一下，感觉是有两个可能，一是make调用了执行别的程序的命令，非编译（学弟说-jN一般对makefile的编译命令起作用，链接就不起作用了），二是container里有限制（应该不是）。</p>
</li>
<li><p>看lapacke_sgetrf.c（LU分解源码）</p>
<ul>
<li>做的事情：size_check -&gt; NAN_check -&gt; LAPACKE_sgetrf_work<ul>
<li>LAPACK_sgetrf, LAPACKE_malloc/frees, LAPACKE_xerbla<ul>
<li>external functions: ILAENV</li>
</ul>
</li>
</ul>
</li>
<li>LAPACK库中sgetrf和sgetrf2的区别：sgetrf2是recursive form，先将大矩阵4等分，再在小矩阵上做sgetrf</li>
</ul>
</li>
<li><p>看lapacke_spotrf.c（Cholesky分解源码）</p>
<ul>
<li>也是size_check -&gt; NAN_check -&gt; LAPACKE_spotrf_work<ul>
<li>LAPACK_spotrf, LAPACKE_xerbla, LAPACKE_malloc/frees</li>
</ul>
</li>
</ul>
</li>
<li><p>一个比较权威的lapack-forum问答 <a href="http://icl.cs.utk.edu/lapack-forum/viewtopic.php?f=2&amp;t=1625" target="_blank" rel="noopener">http://icl.cs.utk.edu/lapack-forum/viewtopic.php?f=2&amp;t=1625</a></p>
<p><img src="F:\Blog\source\_posts\Lucky-Bee-Problems\1" alt="1548609403899"></p>
</li>
</ul>
<p>问问题的这个同学用ATLAS-BLAS编译CLAPACK，发现调BLAS可以multi thread，但是调CLAPACK就一定是单线程。回答的Julie是LAPACK主要开发者。时间2009年比较可疑。最新版LAPACK是2017年release的。老版本不支持LAPACK是真的。开发者们好像是想为进一步提升性能努力。</p>
<ul>
<li><p>PLASMA: a software package for solving problems in dense linear algebra using multicore processors and Xeon Phi coprocessors. PLASMA currently offers a collection of routines for solving linear systems of equations, least squares problems, eigenvalue problems, and singular value problems. 相对于LAPACK的单线程，PLASMA使用了更state-of-the-art的task scheduling 技术，在multi core上实现更优秀的性能，也是LAPACK/MAGMA团队（ICL）开发的。<a href="https://bitbucket.org/icl/plasma" target="_blank" rel="noopener">https://bitbucket.org/icl/plasma</a></p>
</li>
<li><p>OpenMP:</p>
<ul>
<li><p><a href="https://mitpress.mit.edu/books/using-openmp" target="_blank" rel="noopener">Portable Shared Memory Parallel Programming</a> </p>
</li>
<li><p>API that supports multi-platform <a href="https://en.wikipedia.org/wiki/Shared_memory_architecture" target="_blank" rel="noopener">shared memory</a> <a href="https://en.wikipedia.org/wiki/Multiprocessing" target="_blank" rel="noopener">multiprocessing </a>programming in <a href="https://en.wikipedia.org/wiki/C_(programming_language" target="_blank" rel="noopener">C</a>), <a href="https://en.wikipedia.org/wiki/C%2B%2B" target="_blank" rel="noopener">C++</a>, and <a href="https://en.wikipedia.org/wiki/Fortran" target="_blank" rel="noopener">Fortran</a></p>
</li>
<li><p>2017版的LAPACK（就是我的3.8.0）中调用了OpenMP来实现Fortran的多线程（直接在github搜还是比grep快一些！）</p>
<p><img src="F:\Blog\source\_posts\Lucky-Bee-Problems\2" alt="1548609403899"></p>
<p><img src="F:\Blog\source\_posts\Lucky-Bee-Problems\3" alt="1548609403899"></p>
<p>上面两图是$(LAPACK)/SRC/ssytrd_sb2st.F里的. </p>
</li>
</ul>
<blockquote>
<p>学弟建议用一下gdb或者安装CLine单步调试，看看LU分解到底嵌套调用了哪些有OPENMP的库，有时间试一下吧…</p>
</blockquote>
</li>
</ul>
<ul>
<li>修改用户最大线程数：<ul>
<li>ulimit -a查看用户limit信息，ulimit -u查看用户最大线程数</li>
<li>网上说修改/etc/security/limits.d/90-nproc.conf可以改完生效用户最大线程数的修改，但我这里改完没有效果。</li>
<li>既然用了OpenMP，直接export OMP_NUM_THREADS=1，就可以限制线程数啦。</li>
<li>另外，export OMP_DYNAMIC=false</li>
<li>gcc -fopenmp</li>
</ul>
</li>
</ul>
<ul>
<li><p>怎么回Jason？</p>
<ul>
<li>测LU单线程，这个测完了</li>
<li>需要把8 threads, 16 threads都测出来吗。。卡在这里，OMP_NUM_THREADS设置的是upper limit，我需要看OpenMP在Fortran的使用。</li>
<li>明天问一下，poster<strong>可不可以只放single thread的数据</strong>，重新算加速比，Cholesky还是有加速的。</li>
<li>尝试SRC/ssytrd_sb2st.F里改dynamic参数，重新编译make install.</li>
</ul>
</li>
<li><p>之前的Ubuntu因为我的线程数忘记改回来，登不上去了。。。</p>
<ul>
<li>上Cent13，重新配置环境。。</li>
<li>不过这次先修改了ssytrd_sb2st.F等三个文件，再编译</li>
</ul>
</li>
<li><p>回Jason</p>
<ul>
<li>fact: </li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sibylau.github.io/2019/01/21/COMBA-HLS/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jie Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/2.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sibylau's Map">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/21/COMBA-HLS/" itemprop="url">COMBA-HLS</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-21T15:47:51+08:00">
                2019-01-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>COMBA项目：<a href="https://github.com/zjru/COMBA" target="_blank" rel="noopener">https://github.com/zjru/COMBA</a></p>
<p>ICCAD-17 best paper award</p>
<p>这篇前后看了四遍了，总是看了回想起来，有点忘了，就再看。</p>
<p>文章是表象。</p>
<h2 id="Paper-Review"><a href="#Paper-Review" class="headerlink" title="Paper Review"></a>Paper Review</h2><p>COMBA considers <em>7 pragmas</em>:</p>
<ul>
<li><p>Function - function pieplining, function inlining, dataflow</p>
</li>
<li><p>Loop - loop unrolling, loop flattening, loop pipelining</p>
</li>
<li><p>Array - array partitioning</p>
</li>
</ul>
<p><em>Framework Overview</em>:</p>
<p>a. CLang: C/C++ -&gt; LLVM IR </p>
<pre><code class="bash">clang -S -emit-llvm [-O1] test.c -o test.ll
</code></pre>
<p>b. RDC: LLVM IR  -(analytical model + profiling library) -&gt; performance + resource   <em>pass: llvm::module</em></p>
<p>c. MGDSE: evaluation + next configuration, return to b.</p>
<p><em>Experimental testbench</em>: </p>
<ul>
<li>Polybench</li>
<li>Real apps: JPEG, Seidel, Rician</li>
</ul>
<h2 id="Code-Analysis"><a href="#Code-Analysis" class="headerlink" title="Code Analysis"></a>Code Analysis</h2><p>LLVM 3.4  CLang前端</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sibylau.github.io/2019/01/21/2019-01-21/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jie Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/2.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sibylau's Map">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/21/2019-01-21/" itemprop="url">Mon Jan 21 2019 00:00:00 GMT+0800 (China Standard Time)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-21T15:19:49+08:00">
                2019-01-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近想了好久，人生的意义是什么呢。</p>
<p>作为一个从小就排斥写日记又不喜欢历史的人，这个问题我从来都不屑于去想的。</p>
<p>但是最近大大小小的事情缠身，本科时光仿佛倏尔远逝，人生似乎一下子能看到尽头，这个问题就涌上来了。大概是十几天前，期末复习的时候，图书馆里静坐的时候，突然不喜欢复习了，就开始想这些有的没的。昨天实验室师兄去问老师毕业的事情，聊了好久，今天看代码的时候走神又开始陷入迷思。</p>
<p>所以人生的意义是什么呢。我打算先把现在的一点思路记录下来。</p>
<p>所谓主观能动性吧…</p>
<p>你看一棵树，一只蚂蚁，一片云，仿佛自由自在，可是它们本质却不是自由的，它们有自己照本宣科的生命轨迹。人却不一样了，虽然生老病死，命由天定，但我们的理智与情感却能很清楚的分辨，人生和人生之间是天差地别的。我开始有点明白了，我思故我在是真的。</p>
<p>师兄跟我说，我还年轻。我知道，这种无所用心的日子很快就消磨过去，年龄就不知不觉增加了。所以，掌握这种自由，去用心把时光填满，才是人生的意义吧。当垂垂老矣的时候，无需问自己为身外的一切贡献了多少变化，作为一个有自由意识的生命体，我深感不虚此行，了无牵挂，就实现了人生的意义吧。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sibylau.github.io/2019/01/20/ISCA18-GPU-Locality-Mutlu/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jie Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/2.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sibylau's Map">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/20/ISCA18-GPU-Locality-Mutlu/" itemprop="url">ISCA18-GPU-Locality-Mutlu</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-20T16:13:58+08:00">
                2019-01-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Paper URL: <a href="https://people.inf.ethz.ch/omutlu/pub/LocalityDescriptor-Cross-Layer-GPU-Data-Locality-Abstraction_isca18.pdf" target="_blank" rel="noopener">https://people.inf.ethz.ch/omutlu/pub/LocalityDescriptor-Cross-Layer-GPU-Data-Locality-Abstraction_isca18.pdf</a></p>
<h2 id="Background-knowledge"><a href="#Background-knowledge" class="headerlink" title="Background knowledge"></a>Background knowledge</h2><p><a href="http://www.irisa.fr/alf/downloads/collange/cours/gpuprog_ufmg/gpuprog_1.pdf" target="_blank" rel="noopener">http://www.irisa.fr/alf/downloads/collange/cours/gpuprog_ufmg/gpuprog_1.pdf</a></p>
<p><a href="http://www.haifux.org/lectures/267/Introduction-to-GPUs.pdf" target="_blank" rel="noopener">http://www.haifux.org/lectures/267/Introduction-to-GPUs.pdf</a></p>
<p>Moore’s Law/Dennard Scaling</p>
<p>Superscalar execution: 多条流水线同时执行</p>
<blockquote>
<p>Memory Wall : </p>
</blockquote>
<p><img src="F:\Blog\source\_posts\ISCA18-GPU-Locality-Mutlu\%5CUsers%5CSibyl%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1547973400329.png" alt="1547973400329"></p>
<blockquote>
<p>Power wall</p>
</blockquote>
<p><img src="F:\Blog\source\_posts\ISCA18-GPU-Locality-Mutlu\%5CUsers%5CSibyl%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1547973492020.png" alt="1547973492020"></p>
<p>Little’s Law: data = throughput * latency</p>
<p>Sources of Parallelism:</p>
<ul>
<li>ILP: instruction-level parallelism</li>
<li>TLP: thread-level parallelism</li>
<li>DLP: data-level paralleliSm</li>
</ul>
<p>“Horizontal level” parallelism for throughput: more units working in parallel</p>
<p>“vertical level” parallelism for latency hiding: pipelining </p>
<p><img src="F:\Blog\source\_posts\ISCA18-GPU-Locality-Mutlu\%5CUsers%5CSibyl%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1547974536676.png" alt="1547974536676"></p>
<p>NUMA (non-uniform memory access): a computer memory design in multiprocessing, where the memory access time depends on the memory location relative to the processor. Under NUMA, a processor can access its own local memory faster than non-local memory, that is, memory local to another processor or memory shared between processors. In a NUMA system, processors, memory, and I/O are grouped together into cells. The latency and bandwidth characteristics of communication within a cell are “fast” while going outside a cell is “slow”. Since the memory in NUMA systems is physically distributed but logically shared, these systems offer better performance to applications that are optimized to use their features. For non-optimized applications, they still offer better performance since the default behavior is designed to be benign if not beneficial and they still have access to much larger shared resources of memory, CPUs, and disk space. </p>
<blockquote>
<p>Cooperative thread array (CTA): <a href="https://users.ece.cmu.edu/~omutlu/pub/owl_asplos13.pdf" target="_blank" rel="noopener">https://users.ece.cmu.edu/~omutlu/pub/owl_asplos13.pdf</a></p>
</blockquote>
<h2 id="Paper"><a href="#Paper" class="headerlink" title="Paper"></a>Paper</h2><h3 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h3><ul>
<li>NUMA-based hierarchy is expected in future GPUs</li>
<li>与exploit parallelism不同，本篇的贡献在于 express data locality<ul>
<li>reuse-based locality - caches</li>
<li>NUMA locality - NUMA system</li>
</ul>
</li>
<li>Problems: <ul>
<li>programmer - hard to code for best performance</li>
<li>high-level program semantics 的必要性</li>
</ul>
</li>
<li>Propose - Locality Descriptor <ul>
<li>cross-layer abstraction, data locality in GPUs<ul>
<li>为软件提供portable interface for locality optimization，屏蔽下层memory techs and resources</li>
<li>使架构能够leverage program semantics，有效协调一系列技术：CTA, cache manage, memory placement, <strong>programmer-transparent manner</strong></li>
</ul>
</li>
</ul>
</li>
<li>Evaluation<ul>
<li>26.6% avg performance $\uparrow$ reuse-based locality</li>
<li>53.7% avg $\uparrow$ NUMA locality</li>
</ul>
</li>
</ul>
<h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><ul>
<li>prevalence of GPU, importance of data locality<ul>
<li>reuse of data within the application in the cache hierarchy - reuse-based locality</li>
<li>placement of data close to the computation that uses it in a NUMA system - NUMA locality</li>
</ul>
</li>
</ul>
<blockquote>
<p>WHAT is the difference between a scratchpad and a cache?</p>
<ul>
<li>Scratchpad memory: SRAM. Next closest to ALU after the processor registers, similar to L1 cache.  A system with scratchpads is a system with <strong>NUMA</strong> latencies, because the memory access latencies to the different scratchpads and the main memory vary. A scratchpad commonly does not contain a copy of data that is also stored in the main memory. “manually” managed, explicitly addresses, writing and retrieving results. Deterministic.</li>
<li>Cache: SRAM. hardware-managed. “automatically” managed in hardware. (But if misses from main memory and fetches from disk, OS gets involved.)</li>
</ul>
</blockquote>
<ul>
<li>challenges<ul>
<li>no explicit interfaces<ul>
<li>hard for software: techs like thread scheduling, cache bypassing/prioritization, prefetching</li>
<li>inter-CTA(or thread blocks), inter-warp, intra-warp locality</li>
<li>not portable: fine-grained, across different architecture with a different CTA scheduler</li>
</ul>
</li>
<li>application’s access semantics miss from software-transparent arch: NUMA locality (place data close to threads using it), CTA scheduling (scheduling CTAs share data at the same core)</li>
</ul>
</li>
<li>case study<ul>
<li><em>histo</em> benchmark: </li>
</ul>
</li>
</ul>
<p>问涂师兄memory文章的事情。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sibylau.github.io/2019/01/20/HPCA-19-PwrManager-Mutlu/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jie Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/2.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sibylau's Map">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/20/HPCA-19-PwrManager-Mutlu/" itemprop="url">HPCA'19-PwrManager-Mutlu</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-20T12:57:21+08:00">
                2019-01-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Background-Knowledge"><a href="#Background-Knowledge" class="headerlink" title="Background Knowledge"></a>Background Knowledge</h2><p><em>Power Budget</em> : 预算</p>
<p><em>High Availability</em> : <a href="https://en.wikipedia.org/wiki/Availability" target="_blank" rel="noopener">Availability</a> refers to the ability of the user community to obtain a service or good. Availability is usually expressed as a percentage of uptime in a given year.</p>
<p><em>power distribution infrastructures</em> : power supplies(电源), power feeds(送电器), circuit breaker(断电器)</p>
<p><em>Power distribution hierarchy</em> ? </p>
<p>这竟然是一篇强电的文章……</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sibylau.github.io/2019/01/02/Perls/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jie Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/2.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sibylau's Map">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/02/Perls/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-02T11:28:08+08:00">
                2019-01-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sibylau.github.io/2019/01/01/Paper-EMAXVR-Near-ALU-Utilization-2018-IEEE-COOL-Chips/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jie Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/2.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sibylau's Map">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/01/Paper-EMAXVR-Near-ALU-Utilization-2018-IEEE-COOL-Chips/" itemprop="url">Paper: EMAXVR/Near ALU Utilization/2018 IEEE COOL Chips</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-01T08:50:50+08:00">
                2019-01-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sibylau.github.io/2018/12/28/金融工程Review/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jie Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/2.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sibylau's Map">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/28/金融工程Review/" itemprop="url">金融工程Review</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-28T23:34:32+08:00">
                2018-12-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Lecture-0-Introduction"><a href="#Lecture-0-Introduction" class="headerlink" title="Lecture 0 Introduction"></a>Lecture 0 Introduction</h3><p>衍生证券市场上的三类参与者：套期保值者(Hedgers)， 套利者(Arbitrageurs)，投机者(Speculators)。</p>
<p>相对定价法：利用标的资产和衍生产品的相对关系，一般适用于衍生产品，考虑基础资产和衍生产品之间不存在套利机会。不关心基础资产的定价是否合理，只考虑局部的均衡。</p>
<p>绝对定价法：现金流贴现，适用于股票、债券。</p>
<p>无套利定价法是衍生资产分析的基本方法，是金融学区别于经济学供给需求均衡的重要特征。套利：无风险，零投资（不需要自有资金），可复制。</p>
<p>卖空价格偏高的资产组合，买进价格偏低的资产组合。</p>
<blockquote>
<p> <strong>积木分析方法</strong>：模块分析法</p>
<p>看涨期权：权力，按照事先约定好的价格买进标的资产，买权</p>
<p>看跌期权：按照事先约定好的价格卖出标的资产，卖权</p>
<p>资产多头=看涨期权多头+看跌期权空头</p>
<ul>
<li>看涨期权多头：资产价格涨过协议价格的时候，执行获得收益</li>
<li>看跌期权空头：如果资产价格下跌，要承担义务，将资产按事先约定好的价格买进来，造成亏损。若资产价格高于协议价格，可以赚取期权费用。</li>
</ul>
<p>资产空头=看涨期权空头+看跌期权多头</p>
<ul>
<li>看涨期权空头</li>
<li>看跌期权多头</li>
</ul>
<p><img src="F:\Blog\source\_posts\Finance\12291" alt="1546049707839"></p>
<p>看涨期权多头=资产多头+看跌期权多头</p>
<p>看跌期权多头=资产空头+看涨期权多头</p>
</blockquote>
<h3 id="Lecture-1-衍生产品概述"><a href="#Lecture-1-衍生产品概述" class="headerlink" title="Lecture 1 衍生产品概述"></a>Lecture 1 衍生产品概述</h3><h4 id="1-交易场所"><a href="#1-交易场所" class="headerlink" title="1 交易场所"></a>1 交易场所</h4><p>场内交易所：衍生品都是经过交易所标准化之后的衍生产品合约 e.g. 芝加哥期货交易所，中国金融期货交易所。传统上衍生产品交易所是通过公开喊价系统进行的, open-outcry system, 包括交易大厅上的面谈喊叫和一套复杂的手势表达交易意向（哈哈哈感觉好原始）：</p>
<p><img src="F:\Blog\source\_posts\Finance\12292" alt="1546050674536"></p>
<p>现在逐渐用电子交易取代open-outcry system。</p>
<p>场外交易OTC：分散，无形，往往是电话和计算机将交易员联系在一起的网络。一旦同意场外交易，双方可以将交易递交到中央交易对手方 central counter party CCP，或者自行双边清算。CCP介于交易对手之间，使交易的一方不用考虑对手的违约风险。为了提升OTC的流动性，引入做市商机制，通常金融机构担任做市商market maker，提供买入价bit price，卖出价offer price. 买卖价差是金融机构为市场提供流动性所赚取的利润。2008年金融危机和雷曼兄弟倒闭后，场外市场收到很多新规则影响，变得越来越像交易所市场。随着市场发展，事实上衍生产品的场外交易规模远远超出场内交易所的市场规模。</p>
<p><img src="F:\Blog\source\_posts\Finance\12293" alt="1546051237374"></p>
<p>面值和市值不同，上图是面值。</p>
<p>我国场外衍生品市场通常指的是<strong>中国外汇交易中心暨全国银行间同业拆借市场</strong>。1994年4月18日这一中心挂牌成立以后，是中国人民银行直属的事业单位，承担建立并发展银行同业拆借市场、债券市场、外汇市场的重要责任，后来也发展成为我国场外衍生品的具体组织者和运行者。提供交易平台，制定交易规则，开展动态监测。</p>
<p>我国的场外衍生产品的中央交易对手是上海清算所。2009年11月28日银行间市场清算所股份有限公司，也就是称为上海清算所在上海正式成立。上海清算所是经财政部中国人民银行批准成立的专业清算机构。</p>
<p><img src="F:\Blog\source\_posts\Finance\12294" alt="1546051682572"></p>
<p><img src="F:\Blog\source\_posts\Finance\12295" alt="1546051732794"></p>
<h4 id="合约类型"><a href="#合约类型" class="headerlink" title="合约类型"></a>合约类型</h4><blockquote>
<p>远期 期货 期权 互换（掉期）</p>
<p>远期：将来某一指定时刻以事先约定好的价格买入或卖出某一基础资产的合约。买入方为多头long position，卖出方为空头short position.</p>
<p>即期合约：当天或者T+2交易日买入或卖出的合约</p>
</blockquote>
<p><img src="F:\Blog\source\_posts\Finance\12296" alt="1546052589284"></p>
<p>买入和卖出是做市商（银行）的角度。一个月远期汇率的买入价1.5538，他表示的是银行在当前愿意在一个月以后以每英镑1.5538美元买入英镑。一个月远期卖出价1.5543，表示银行在当前愿意在一个月以后以每英镑1.5543美元卖出英镑。银行的买入价就是我们的卖出价，银行的卖出价就是我们的买入价。</p>
<p>合约到期时，<strong>远期合约的价值</strong>：</p>
<blockquote>
<p>$S_T-K$ </p>
</blockquote>
<p>远期合约的基础资产到期时的市场价格-远期合约约定的执行价格。远期合约是零和博弈。</p>
<p>签订远期合约时，双方不需要给对方进行支付，此时合约对双方价值为零。使得远期合约价值为零的协议价格是远期价格。</p>
<blockquote>
<p><strong>期货合约</strong>：也是将来某一指定时刻以约定价格买入或卖出某一基础资产的合约。与远期合约不同，期货合约是在交易所内进行的，匿名交易。远期合约是在OTC进行，交易双方知道对方是谁。交易所制订了包括保证金、逐日盯市等交易机制保证双方履行合约。</p>
<p><strong>互换</strong>：它是指交易双方依据预先约定的协议在未来确定的期限内，相互交换现金流的金融合约。在合约中双方约定现金流的交换时间。互换的期限一般比远期和期货长，可以看成一系列远期的组合。</p>
</blockquote>
<ul>
<li>货币互换</li>
<li>利率互换：利率互换是指交易双方约定在未来一定期限内根据约定的人民币本金和利率计算利息并进行利息交换的金融合约。</li>
</ul>
<blockquote>
<p><strong>期权合约</strong>：看涨（认购，买权，无义务）、看跌（认购，卖权）</p>
</blockquote>
<ul>
<li>美式期权：到期日之前任何时刻或者期权合约存续期内都可以选择行权</li>
<li>欧式期权：到期日才行使期权</li>
<li>期权的空头是权力出让者，承担义务，而期权多头只有权力没有义务。将来期权到期时，如果期权的多头要行使权利，期权的空头方只有被动的接受期权的执行。远期、期货的多头空头，买和卖既是权利也是义务。</li>
<li>期权买卖价差往往比标的资产价差大，因为期权市场和基础市场的流动性是不一样的。基础市场的做市商风险远远低于期权市场的做市商。</li>
<li>当执行价格上升的时候，看涨期权价格是下降的；<br>但期权期限延长的时候，看涨期权的价值是上升的。当执行价格上升的时候，看跌期权价格是上升的；当期限拉长的时候看跌期权价值也是上升的。</li>
<li>在美国每份股票期权合约的规模是100股</li>
<li>盈亏平衡点：协议价格+期权费用（看涨期权）；协议价格-期权费用（看跌期权）</li>
</ul>
<h3 id="Lecture-2-期货市场"><a href="#Lecture-2-期货市场" class="headerlink" title="Lecture 2 期货市场"></a>Lecture 2 期货市场</h3><p>这一章主要讲了期货市场的运作机制，交易指令和监管机构等等。</p>
<p>大多数期货不进行实物交割。</p>
<p>基础资产是金融资产的时候，无需规定等级.</p>
<p>期货价格的收敛性：随着期货合约临近到期日时，期货价格会逐渐向基础资产的即期价格收敛。</p>
<p>保证金账户的运作：期货每天结算，远期合约只有到期时结算。</p>
<h3 id="Lecture-3-利用期货的对冲策略"><a href="#Lecture-3-利用期货的对冲策略" class="headerlink" title="Lecture 3 利用期货的对冲策略"></a>Lecture 3 利用期货的对冲策略</h3><h4 id="基差风险"><a href="#基差风险" class="headerlink" title="基差风险"></a>基差风险</h4><blockquote>
<p>基差=被对冲资产的即期价格-期货价格</p>
<p>多头对冲策略中，期货平仓时基差越大，对冲者越不利；期货空头对冲策略中，期货平仓时基差越大，对对冲者越有利。</p>
</blockquote>
<p>经验法则（rule of thumb）：尽量选择与对冲到期日最近却在其之后交割月份的期货合约。</p>
<p>当期货合约的基础资产与被对冲的资产不一致时，就会出现交叉对冲（cross hedging）。对冲比率（hedging ratio）就是指持有期货合约的头寸数量与被对冲资产风险敞口数量的比率。</p>
<blockquote>
<p><strong>最优对冲比率</strong>（最小方差对冲比率）</p>
<p>${\Delta}S$：在对冲期间内，基础资产价格$S$的变化；</p>
<p>${\Delta}F$：在对冲期间内，期货价格$F$的变化。</p>
<p>同时，构建如下线性回归方程：${\Delta}S={\alpha}+{h’}{\Delta}F+{\varepsilon}$</p>
<p>该方程的含义是从而用期货价格的变化线性表达基础资产价格的变化。${h’}$表示最优对冲比率。</p>
<p>${h’}={\rho}{\frac{\sigma_S}{\sigma_F}}$</p>
<p>$\sigma_S$是标准差，$\rho$是相关系数</p>
<p>在计算中要选择一定数量的长度相同而且互不重叠的时间区间（time interval）</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sibylau.github.io/2018/12/28/GReP/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jie Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/2.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sibylau's Map">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/28/GReP/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-28T09:24:59+08:00">
                2018-12-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="GReP-编程指南"><a href="#GReP-编程指南" class="headerlink" title="GReP 编程指南"></a>GReP 编程指南</h3><p><img src="C:\Users\Sibyl\AppData\Roaming\Typora\typora-user-images\1545960622435.png" alt="1545960622435"></p>
<blockquote>
<p>Shared Memory</p>
</blockquote>
<h4 id="Questions"><a href="#Questions" class="headerlink" title="Questions"></a>Questions</h4><ul>
<li>arbiter &amp; controller?</li>
<li></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sibylau.github.io/2018/12/26/Financial Risk Management Lecture 12/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jie Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/2.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sibylau's Map">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/26/Financial Risk Management Lecture 12/" itemprop="url">Financial Risk Management Lecture 12</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-26T21:37:04+08:00">
                2018-12-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="lecture-12-Intro-to-Corporate-Bond-amp-Credit-Risk"><a href="#lecture-12-Intro-to-Corporate-Bond-amp-Credit-Risk" class="headerlink" title="lecture 12 Intro to Corporate Bond &amp; Credit Risk"></a>lecture 12 Intro to Corporate Bond &amp; Credit Risk</h2><h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><p>Focus: Corporate Bond (公司债券), Credit Risk Derivatives (CDS)</p>
<p>回顾一下Treasury Bonds:</p>
<table>
<thead>
<tr>
<th>Treasury</th>
<th>Minimum denomination</th>
<th>Sold at</th>
<th>Maturity</th>
<th>Interest payments</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>U.S. Treasury bills</strong></td>
<td>$1,000</td>
<td>Discount</td>
<td>4-, 13-, 26-, and 52-week</td>
<td>Interest and principal paid at maturity</td>
</tr>
<tr>
<td><strong>U.S. Treasury notes</strong></td>
<td>$1,000</td>
<td>Coupon</td>
<td>2-, 3-, 5-, 7-, and 10-year</td>
<td>Interest paid semi-annually, principal at maturity</td>
</tr>
<tr>
<td><strong>U.S. Treasury bonds</strong></td>
<td>$1,000</td>
<td>Coupon</td>
<td>30-year</td>
<td>Interest paid semi-annually, principal at maturity</td>
</tr>
</tbody>
</table>
<p>Good Source! For every bond that has not matured in 2002, we can find info from <code>FINRA</code> website, the <code>TRACE</code> database. The price reported to <code>FINRA</code> is always the clean price.</p>
<blockquote>
<p>Convention:</p>
<p>Corporate Bond | 30/360 day count</p>
</blockquote>
<p>Three types of defaults defined in major rating companies: <code>missed coupon payment</code> , <code>bankruptcy</code> and <code>distressed exchanges</code>.</p>
<p>Other contractual provisions to protect the bond holder: <code>sinking fund provisions</code>, <code>callable</code>, <code>puttable</code>, <code>convertible</code>. 是为了保护债券持有者而声明的合约条例。</p>
<h4 id="Questions"><a href="#Questions" class="headerlink" title="Questions:"></a>Questions:</h4><ol>
<li><p>Seniority Level of a Bond? Senior/Subordinated</p>
</li>
<li><p>Collateral of a Bond? unsecured…</p>
</li>
</ol>
<h4 id="New-Words"><a href="#New-Words" class="headerlink" title="New Words:"></a>New Words:</h4><p><code>indenture契约</code> <code>default违约</code> <code>rating companies评级公司</code> </p>
<p><code>grace period</code> | In the U.S., corporate bond issuer has the 90-day grace period. It means that once a bond issuer misses a coupon payment, it still has 90 days to make up this coupon to avoid bankruptcy. 感觉是宣告破产前给予的90天尊严…</p>
<p> <code>contractual provisions合同条款</code> </p>
<p><code>sinking fund provisions偿债基金准备金</code> | require the debt to be retired periodically by a predetermined amount.</p>
<p><code>callable bonds</code> | Callable bonds are bonds that give the issuer the right to redeem or buy back all or part of the bond before it matures. </p>
<p><code>puttable bonds</code> | A puttable bond is a bond that gives the bondholder the ability to sell the bond back to the issuer at a predetermined price on predetermined dates. The bondholder has the option to require the early redemption of this bond at its face value.</p>
<p><code>convertible bonds</code> | A convertible bond is where the bondholder has the right to exchange the bond for a specified number of the company’s common shares. The bondholder has<br>the option to convert the corporate debt into a certain number of shares of the common stock issued by the same firm.</p>
<p>For more info refer to <a href="https://thedailycpa.com/2018/02/08/callable-putable-and-convertible-bonds/" target="_blank" rel="noopener">https://thedailycpa.com/2018/02/08/callable-putable-and-convertible-bonds/</a></p>
<p><code>redemption赎回</code> </p>
<h3 id="Backgrounds"><a href="#Backgrounds" class="headerlink" title="Backgrounds"></a>Backgrounds</h3><h4 id="Trading"><a href="#Trading" class="headerlink" title="Trading"></a>Trading</h4><p>Corporate bonds are traded much less frequently than stocks (trading volume交易体量差异巨大)  -&gt; liquidity premium</p>
<p>Corporate bonds are traded in OTC markets, not in centralized open outcry exchange as stocks. stocks在证券交易所，债券在场外交易所。如果要购买公司债券，需要call your broker，broker will ask a dealer to make a quote. OTC会有round trip cost，e.g. dealer A has on inventory, he will ask dealer B. deal B sell the bond at $92 to A, and A will sell it at $92.5 to you. $0.5 is round trip cost. It can be viewed as the effective bid-ask spread.</p>
<p>Effective bid-ask spreads are large for small trades.</p>
<p>Today the transaction prices of corporate bonds are usually established by individual negotiations. 二战后，公司债券的交易体量相比于股票几乎可以忽略不计。散户几乎不持有公司债券。</p>
<h4 id="New-Words-1"><a href="#New-Words-1" class="headerlink" title="New Words"></a>New Words</h4><p><code>equity股市</code> <code>centralized open outcry exchange集中公开叫价交易所:bid and ask prices are well established</code>  <code>broker经纪人/中间商</code> <code>fixed commissions固定佣金</code> <code>pension fund养老保险基金</code> <code>retail investors散户投资者</code></p>
<h3 id="Yields-and-Accrued-Interest"><a href="#Yields-and-Accrued-Interest" class="headerlink" title="Yields and Accrued Interest"></a>Yields and Accrued Interest</h3><p>full price/invoice price = accrued interest + clean price/flat price</p>
<p>accrued interest = the additional interest i=since the last coupon payment</p>
<p>Example:</p>
<table>
<thead>
<tr>
<th>11</th>
<th>12</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
</tr>
</thead>
<tbody>
<tr>
<td>30-9=21</td>
<td>30</td>
<td>30</td>
<td>30</td>
<td>30</td>
<td>30</td>
<td>3</td>
</tr>
</tbody>
</table>
<p>accrued interest =  $\frac{2.95}{2}\times\frac{174}{180}=1.4258$ </p>
<p> The invoice price is the price of a bond when discounting future cashflows with the proper discount rate.</p>
<p>To Review~ convert the par yield curve to zero yield curve with the bootstrap method.</p>
<p>YTM of treasury bond is much lower than the equivalent corporate bond.</p>
<h4 id="New-Words-2"><a href="#New-Words-2" class="headerlink" title="New Words"></a>New Words</h4><p><code>Settlement day结算日</code> </p>
<h3 id="Credit-Ratings"><a href="#Credit-Ratings" class="headerlink" title="Credit Ratings"></a>Credit Ratings</h3><p>worldwide major rating agencies: Moody’s, S&amp;P, Fitch/Duff &amp; Phelps. They all follow issue-pay model. 意思是issuer可以选择一个最高的评级，比如Moody‘s的评级不如S&amp;P高，我们就选S&amp;P，pay a large commission fee to the agency to publish this rating. Moral Hazard!</p>
<p>financial policy(reserve better), geographical diversity, …</p>
<p>Credit ratings are always assigned to the bond issuer instead of a particular bond issue. </p>
<blockquote>
<p>Yield spread = Expected Default Loss + Default Risk Premia</p>
<p>Expected Default Loss = Default Probability $\times$ Loss Given Default (loss ratio scaled by the face value of default debt, = 1 - Recovery Rate)</p>
</blockquote>
<h4 id="New-Words-3"><a href="#New-Words-3" class="headerlink" title="New Words"></a>New Words</h4><p><code>cohort合伙人，同伙</code> <code>speculative grade bond投机级</code> <code>investment grade bond投资级,high yield bond/junk bond</code> <code>Basel II</code> <code>solvency ratio偿付能力比率</code> </p>
<p><code>corporate yield spread: difference between corporate bond yield and yield on the otherwise identical treasury bond</code>  </p>
<p> <code>risk neutral:a mindset where an investor is indifferent to risk when making an investment decision.</code> </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/2.jpg" alt="Jie Liu">
            
              <p class="site-author-name" itemprop="name">Jie Liu</p>
              <p class="site-description motion-element" itemprop="description">幽人竹桑园 归卧寂无喧</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">12</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-tree"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jie Liu</span>

  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  







<!-- LOCAL: You can save these files to your site and update links -->
    
        
        <link rel="stylesheet" href="https://aimingoo.github.io/gitmint/style/default.css">
        <script src="https://aimingoo.github.io/gitmint/dist/gitmint.browser.js"></script>
    
<!-- END LOCAL -->

    
      <style>
        a.gitment-editor-footer-tip { display: none; }
        .gitment-container.gitment-footer-container { display: none; }
      </style>
    

    







  





  

  

  

  
  

  

  

  

</body>
</html>
